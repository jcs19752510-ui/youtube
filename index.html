<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìœ íŠœë¸Œ ëŒ€ë³¸ í¸ì§‘ê¸°</title>
    <style>
        /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ - ìµœì†Œí•œì˜ ë””ìì¸ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background-color: #f5f5f5;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        /* ì…ë ¥ ì˜ì—­ */
        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            font-size: 14px;
            border: 2px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            font-family: inherit;
        }

        textarea:focus {
            outline: none;
            border-color: #4CAF50;
        }

        /* ë²„íŠ¼ ì˜ì—­ */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .btn-primary {
            background-color: #4CAF50;
            color: white;
        }

        .btn-primary:hover {
            background-color: #45a049;
        }

        .btn-secondary {
            background-color: #2196F3;
            color: white;
        }

        .btn-secondary:hover {
            background-color: #0b7dda;
        }

        .btn-danger {
            background-color: #f44336;
            color: white;
        }

        .btn-danger:hover {
            background-color: #da190b;
        }

        .btn-info {
            background-color: #ff9800;
            color: white;
        }

        .btn-info:hover {
            background-color: #e68900;
        }

        /* ê²°ê³¼ ì˜ì—­ */
        #result {
            min-height: 200px;
            padding: 20px;
            background-color: #fafafa;
            border: 2px solid #ddd;
            border-radius: 4px;
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 14px;
        }

        #result:empty:before {
            content: "ì •ë¦¬ëœ ëŒ€ë³¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...";
            color: #999;
        }

        /* ë¬¸ë‹¨ ìŠ¤íƒ€ì¼ */
        .paragraph {
            margin-bottom: 20px;
        }

        /* ì•Œë¦¼ ë©”ì‹œì§€ */
        .message {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            text-align: center;
            display: none;
        }

        .message.success {
            background-color: #d4edda;
            color: #155724;
            display: block;
        }

        .message.error {
            background-color: #f8d7da;
            color: #721c24;
            display: block;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 600px) {
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸ“ ìœ íŠœë¸Œ ëŒ€ë³¸ í¸ì§‘ê¸°</h1>

    <!-- ì…ë ¥ ì˜ì—­ -->
    <div class="container">
        <h2>1. ìœ íŠœë¸Œ ëŒ€ë³¸ ì…ë ¥</h2>
        <textarea id="scriptInput" placeholder="ì—¬ê¸°ì— ìœ íŠœë¸Œ ëŒ€ë³¸ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”..."></textarea>
        
        <!-- ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="button-group">
            <button class="btn-primary" onclick="formatScript()">ğŸ“„ ë¬¸ë‹¨ ì •ë¦¬í•˜ê¸°</button>
            <button class="btn-secondary" onclick="copyResult()">ğŸ“‹ ê²°ê³¼ ë³µì‚¬í•˜ê¸°</button>
            <button class="btn-info" onclick="saveScript()">ğŸ’¾ ì €ì¥í•˜ê¸°</button>
            <button class="btn-danger" onclick="clearAll()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
        </div>

        <!-- ì•Œë¦¼ ë©”ì‹œì§€ -->
        <div id="message" class="message"></div>
    </div>

    <!-- ê²°ê³¼ ì˜ì—­ -->
    <div class="container">
        <h2>2. ì •ë¦¬ëœ ëŒ€ë³¸</h2>
        <div id="result"></div>
    </div>

    <script>
        // ========================================
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        // ========================================
        window.addEventListener('DOMContentLoaded', function() {
            loadSavedScript();
        });

        // ========================================
        // í•µì‹¬ ê¸°ëŠ¥: ëŒ€ë³¸ ë¬¸ë‹¨ ì •ë¦¬
        // ========================================
        function formatScript() {
            const input = document.getElementById('scriptInput').value.trim();
            const resultDiv = document.getElementById('result');

            // ì…ë ¥ê°’ ê²€ì¦
            if (!input) {
                showMessage('ëŒ€ë³¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!', 'error');
                return;
            }

            // 1ë‹¨ê³„: íƒ€ì„ìŠ¤íƒ¬í”„ ì œê±° (ì˜ˆ: [00:12], 0:34, 00:12:34 í˜•ì‹)
            let cleaned = input.replace(/\[?\d{1,2}:\d{2}(?::\d{2})?\]?/g, '');

            // 2ë‹¨ê³„: ì—°ì†ëœ ê³µë°± ì œê±°
            cleaned = cleaned.replace(/\s+/g, ' ');

            // 3ë‹¨ê³„: ë¬¸ì¥ ë¶€í˜¸ ë’¤ì— ê³µë°± ì¶”ê°€ (ë¬¸ë‹¨ ë¶„ë¦¬ ì¤€ë¹„)
            cleaned = cleaned.replace(/([.!?])\s*/g, '$1 ');

            // 4ë‹¨ê³„: ë¬¸ì¥ì„ ë°°ì—´ë¡œ ë¶„ë¦¬
            const sentences = cleaned.split(/([.!?])\s+/).filter(s => s.trim());

            // 5ë‹¨ê³„: ë¬¸ì¥ì„ ë‹¤ì‹œ í•©ì¹˜ë©´ì„œ ë¬¸ë‹¨ ìƒì„± (2-3ë¬¸ì¥ë§ˆë‹¤ ë¬¸ë‹¨ ë‚˜ëˆ„ê¸°)
            let paragraphs = [];
            let currentParagraph = '';
            let sentenceCount = 0;

            for (let i = 0; i < sentences.length; i++) {
                currentParagraph += sentences[i];
                
                // ë¬¸ì¥ ì¢…ê²° ë¶€í˜¸ì¸ ê²½ìš° ì¹´ìš´íŠ¸ ì¦ê°€
                if (sentences[i].match(/[.!?]/)) {
                    sentenceCount++;
                    
                    // 2-3ë¬¸ì¥ë§ˆë‹¤ ë¬¸ë‹¨ ë‚˜ëˆ„ê¸°
                    if (sentenceCount >= 2) {
                        paragraphs.push(currentParagraph.trim());
                        currentParagraph = '';
                        sentenceCount = 0;
                    }
                }
            }

            // ë‚¨ì€ ë¬¸ì¥ ì¶”ê°€
            if (currentParagraph.trim()) {
                paragraphs.push(currentParagraph.trim());
            }

            // 6ë‹¨ê³„: ê²°ê³¼ í™”ë©´ì— í‘œì‹œ (ë¬¸ë‹¨ë³„ë¡œ ì¤„ë°”ê¿ˆ)
            const formattedText = paragraphs.join('\n\n');
            resultDiv.textContent = formattedText;

            // ì„±ê³µ ë©”ì‹œì§€
            showMessage('ëŒ€ë³¸ì´ ì„±ê³µì ìœ¼ë¡œ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤! âœ…', 'success');

            // ìë™ ì €ì¥
            saveToLocalStorage(input, formattedText);
        }

        // ========================================
        // ê²°ê³¼ ë³µì‚¬ ê¸°ëŠ¥
        // ========================================
        function copyResult() {
            const resultDiv = document.getElementById('result');
            const text = resultDiv.textContent.trim();

            if (!text || text === "ì •ë¦¬ëœ ëŒ€ë³¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...") {
                showMessage('ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤!', 'error');
                return;
            }

            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(text).then(function() {
                showMessage('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹', 'success');
            }).catch(function(err) {
                // êµ¬í˜• ë¸Œë¼ìš°ì € ëŒ€ì‘ (ëŒ€ì²´ ë°©ë²•)
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showMessage('í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹', 'success');
            });
        }

        // ========================================
        // ì €ì¥ ê¸°ëŠ¥ (LocalStorage)
        // ========================================
        function saveScript() {
            const input = document.getElementById('scriptInput').value.trim();
            const result = document.getElementById('result').textContent.trim();

            if (!input && !result) {
                showMessage('ì €ì¥í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤!', 'error');
                return;
            }

            saveToLocalStorage(input, result);
            showMessage('ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ’¾', 'success');
        }

        // LocalStorageì— ì €ì¥
        function saveToLocalStorage(input, result) {
            const data = {
                input: input,
                result: result,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem('youtubeScript', JSON.stringify(data));
        }

        // LocalStorageì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSavedScript() {
            const saved = localStorage.getItem('youtubeScript');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    document.getElementById('scriptInput').value = data.input || '';
                    document.getElementById('result').textContent = data.result || '';
                    
                    if (data.input || data.result) {
                        showMessage('ì´ì „ì— ì‘ì—…í•˜ë˜ ë‚´ìš©ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! ğŸ“‚', 'success');
                    }
                } catch (e) {
                    console.error('ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', e);
                }
            }
        }

        // ========================================
        // ì´ˆê¸°í™” ê¸°ëŠ¥
        // ========================================
        function clearAll() {
            // ì‚¬ìš©ì í™•ì¸
            if (!confirm('ëª¨ë“  ë‚´ìš©ì„ ì§€ìš°ì‹œê² ìŠµë‹ˆê¹Œ?\n(ì €ì¥ëœ ë°ì´í„°ë„ ì‚­ì œë©ë‹ˆë‹¤)')) {
                return;
            }

            // ì…ë ¥ì°½ê³¼ ê²°ê³¼ì°½ ì´ˆê¸°í™”
            document.getElementById('scriptInput').value = '';
            document.getElementById('result').textContent = '';

            // LocalStorage ì‚­ì œ
            localStorage.removeItem('youtubeScript');

            showMessage('ëª¨ë“  ë‚´ìš©ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ—‘ï¸', 'success');
        }

        // ========================================
        // ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
        // ========================================
        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = 'message ' + type;

            // 3ì´ˆ í›„ ë©”ì‹œì§€ ìë™ ìˆ¨ê¹€
            setTimeout(function() {
                messageDiv.style.display = 'none';
            }, 3000);
        }

        // ========================================
        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (ì„ íƒì‚¬í•­)
        // ========================================
        document.addEventListener('keydown', function(e) {
            // Ctrl + Enter: ë¬¸ë‹¨ ì •ë¦¬
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                formatScript();
            }
            // Ctrl + S: ì €ì¥
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                saveScript();
            }
        });
    </script>
</body>
</html>